{% load staticfiles %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>在线状态</title>
     <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="{% static '../../static/css/bootstrap.min.css' %}">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script type="text/javascript">
        function human_readable_time(tmpdate) {
            var now=new Date();
            var tmpArray=tmpdate.split(" ");
            var tmpYMD=tmpArray[0].split("-");
            var tmptime=tmpArray[1].split(":");
            var logindate=new Date(now.getYear()-tmpYMD[0],
                now.getMonth()-(tmpYMD[1]-parseInt(1)),
                now.getDay()-tmpYMD[2],
                now.getHours()-tmptime[0],
                now.getMinutes()-tmptime[1],
                now.getSeconds()-tmptime[2]);
            return logindate;
        }
        function uptime() {
            $("table tr:gt(0)").each(
                function() {
                    $(this).children('td:eq(6)').html(human_readable_time($(this).children('td:eq(5)').text()));
                });
            t=setTimeout('uptime()',1000);
        }
    </script>
</head>
<body onload="uptime()">

<table class="table table-striped">
    <tr>
        <th>服务器</th>
        <th>用户名</th>
        <th>组</th>
        <th>来源ip</th>
        <th>内部ip</th>
        <th>登录时间</th>
        <th>在线时长</th>
    </tr>
    {% for line in status %}
        <tr>
            <td>{{line.username}}</td>
            <td>{{line.groupname}}</td>
            <td>{{line.nasipaddress}}</td>
            <td>{{line.callingstationid}}</td>
            <td>{{line.framedipaddress}}</td>
            <td>{{line.acctstarttime|date:"Y-m-d H:i:s"}}</td>
            <td></td>
        </tr>
    {% endfor %}
</table>

<script src="{% static '../../static/js/jquery.min.js' %}"></script>
<script src="{% static '../../static/js/bootstrap.min.js' %}"></script>


</body>
</html>